/**
 * 精细化设计系统 - 配色与字体
 * 基于专业的UI设计原则，追求清晰性、一致性和舒适性
 */

/* ===== 字体导入 ===== */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;600;700&display=swap');

/* ===== CSS变量定义 - 扩展色彩系统 ===== */
:root {
  /* 背景 (Surface) */
  --color-surface-primary: #FAFAF9;    /* 纸张白 - 页面主背景 */
  --color-surface-secondary: #FFFFFF;  /* 卡片白 - 容器背景 */

  /* 边框 (Border) */
  --color-border-default: #EBEBEA;     /* 微妙灰 - 默认边框 */
  --color-border-interactive: #A8A29E; /* 中性灰 - 交互边框 */

  /* 文本 (Text) */
  --color-text-primary: #292524;       /* 木炭黑 - 主要文本 */
  --color-text-secondary: #78716C;     /* 石板灰 - 次要文本 */
  --color-text-disabled: #D6D3D1;      /* 雾灰 - 禁用文本 */

  /* 主色/行为色 (Accent) */
  --color-accent-default: #059669;     /* 专业绿 - 默认 */
  --color-accent-hover: #047857;       /* 深松绿 - 悬浮 */
  --color-accent-active: #065F46;      /* 墨绿 - 点击 */

  /* 语义色 (Semantic) */
  --color-success: #16A34A;            /* 成功绿 */
  --color-warning: #F59E0B;            /* 警告黄 */
  --color-error: #DC2626;              /* 错误红 */
  --color-info: #2563EB;               /* 信息蓝 */
  
  /* 字体系统 (Typography System) */
  --font-family-base: 'Inter', 'Noto Sans SC', 'Microsoft YaHei', 'PingFang SC', sans-serif;
  
  /* 字体大小 */
  --font-size-h1: 2rem;               /* 32px - 页面主标题 */
  --font-size-h2: 1.5rem;             /* 24px - 区块标题 */
  --font-size-h3: 1.25rem;            /* 20px - 卡片标题 */
  --font-size-body: 1rem;             /* 16px - 正文段落 */
  --font-size-label: 0.875rem;        /* 14px - 标签输入框 */
  --font-size-small: 0.875rem;        /* 14px - 辅助注释 */
  --font-size-button: 1rem;           /* 16px - 按钮文字 */
  
  /* 字重 */
  --font-weight-regular: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  
  /* 行高 */
  --line-height-h1: 1.2;
  --line-height-h2: 1.3;
  --line-height-h3: 1.4;
  --line-height-body: 1.6;
  --line-height-label: 1.5;
  --line-height-small: 1.5;
  --line-height-button: 1;
  
  /* 空间系统 - 基于8px网格 */
  --space-xs: 0.25rem;                /* 4px - 图标与文字间距 */
  --space-sm: 0.5rem;                 /* 8px - 小按钮内边距 */
  --space-md: 1rem;                   /* 16px - 元素间距、卡片内边距 */
  --space-lg: 1.5rem;                 /* 24px - 紧凑型区块间距 */
  --space-xl: 2rem;                   /* 32px - 标准区块间距 */
  --space-2xl: 3rem;                  /* 48px - 大区块、页面分栏间距 */
  
  /* 圆角系统 */
  --radius-sm: 0.375rem;              /* 6px */
  --radius-md: 0.5rem;                /* 8px */
  --radius-lg: 0.75rem;               /* 12px */
  
  /* 阴影系统 */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
}

/* ===== 深色模式支持 - 完整映射 ===== */
.dark {
  /* 背景 (Surface) */
  --color-surface-primary: #1C1917;    /* 深木炭 - 页面主背景 */
  --color-surface-secondary: #292524;  /* 木炭黑 - 容器背景 */

  /* 边框 (Border) */
  --color-border-default: #44403C;     /* 石板灰 - 默认边框 */
  --color-border-interactive: #57534E; /* 暖石灰 - 交互边框 */

  /* 文本 (Text) */
  --color-text-primary: #E7E5E4;       /* 米白 - 主要文本 */
  --color-text-secondary: #A8A29E;     /* 中性灰 - 次要文本 */
  --color-text-disabled: #57534E;      /* 暖石灰 - 禁用文本 */

  /* 主色/行为色 (Accent) - 深色模式需更亮 */
  --color-accent-default: #22C55E;     /* 活力绿 - 默认 */
  --color-accent-hover: #16A34A;       /* 亮松绿 - 悬浮 */
  --color-accent-active: #15803D;      /* 深翠绿 - 点击 */

  /* 语义色 (Semantic) - 深色模式调整 */
  --color-success: #4ADE80;            /* 成功绿 */
  --color-warning: #FACC15;            /* 警告黄 */
  --color-error: #F87171;              /* 错误红 */
  --color-info: #60A5FA;               /* 信息蓝 */
}

/* ===== 系统深色模式支持（备用） ===== */
@media (prefers-color-scheme: dark) {
  :root:not(.light) {
    --color-background: #1C1917;
    --color-surface: #292524;
    --color-border: #44403C;

    --color-text-primary: #F5F5F4;
    --color-text-secondary: #A8A29E;
    --color-text-disabled: #57534E;

    --color-accent: #10B981;
    --color-accent-hover: #059669;
    --color-accent-active: #047857;
  }
}

/* ===== 基础样式重置 ===== */
* {
  box-sizing: border-box;
}

body {
  font-family: var(--font-family-base) !important;
  font-size: var(--font-size-body) !important;
  font-weight: var(--font-weight-regular) !important;
  line-height: var(--line-height-body) !important;
  color: var(--color-text-primary) !important;
  background-color: var(--color-surface-primary) !important;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: background-color 0.2s ease, color 0.2s ease;
}

/* ===== 字体层级样式 ===== */
.text-h1 {
  font-size: var(--font-size-h1);
  font-weight: var(--font-weight-bold);
  line-height: var(--line-height-h1);
  color: var(--color-text-primary);
}

.text-h2 {
  font-size: var(--font-size-h2);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-h2);
  color: var(--color-text-primary);
}

.text-h3 {
  font-size: var(--font-size-h3);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-h3);
  color: var(--color-text-primary);
}

.text-body {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-regular);
  line-height: var(--line-height-body);
  color: var(--color-text-primary);
}

.text-label {
  font-size: var(--font-size-label);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-label);
  color: var(--color-text-secondary);
}

.text-small {
  font-size: var(--font-size-small);
  font-weight: var(--font-weight-regular);
  line-height: var(--line-height-small);
  color: var(--color-text-secondary);
}

.text-button {
  font-size: var(--font-size-button);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-button);
}

/* ===== 核心组件交互系统 ===== */

/* 表面容器 */
.surface {
  background-color: var(--color-surface-secondary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
}

/* 主要按钮 (Primary Button) */
.button-primary {
  background-color: var(--color-accent-default);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  padding: var(--space-sm) var(--space-md);
  font-family: var(--font-family-base);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
  position: relative;
  overflow: hidden;
}

.button-primary:hover {
  background-color: var(--color-accent-hover);
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

.button-primary:active {
  background-color: var(--color-accent-active);
  transform: translateY(0);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.button-primary:focus {
  outline: 2px solid var(--color-accent-default);
  outline-offset: 4px;
}

.button-primary:disabled {
  background-color: var(--color-text-disabled);
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* 次要按钮 (Secondary Button) */
.button-secondary {
  background-color: transparent;
  color: var(--color-text-primary);
  border: 1px solid var(--color-border-interactive);
  border-radius: var(--radius-md);
  padding: var(--space-sm) var(--space-md);
  font-family: var(--font-family-base);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.button-secondary:hover {
  border-color: var(--color-accent-default);
  color: var(--color-accent-default);
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
}

.button-secondary:active {
  transform: translateY(0);
}

.button-secondary:focus {
  outline: 2px solid var(--color-accent-default);
  outline-offset: 4px;
}

/* 输入框 (Input Field) */
.input-field {
  background-color: var(--color-surface-secondary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  padding: var(--space-sm) var(--space-md);
  font-family: var(--font-family-base);
  font-size: var(--font-size-body);
  color: var(--color-text-primary);
  transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
  width: 100%;
}

.input-field:focus {
  outline: none;
  border-color: var(--color-accent-default);
  box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
}

.input-field::placeholder {
  color: var(--color-text-disabled);
}

.input-field:disabled {
  background-color: var(--color-surface-primary);
  color: var(--color-text-disabled);
  cursor: not-allowed;
}

/* 输入框验证状态 */
.input-field.error {
  border-color: var(--color-error);
  box-shadow: 0 0 0 3px rgba(248, 113, 113, 0.1);
}

.input-field.success {
  border-color: var(--color-success);
  box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.1);
}

/* 输入框标签 */
.input-label {
  display: block;
  margin-bottom: var(--space-xs);
  font-size: var(--font-size-label);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  transition: color 0.2s ease;
}

.input-label.focused {
  color: var(--color-accent-default);
}

.input-label.error {
  color: var(--color-error);
}

/* ===== 状态样式 ===== */
.status-success {
  color: var(--color-success);
}

.status-warning {
  color: var(--color-warning);
}

.status-error {
  color: var(--color-error);
}

.status-info {
  color: var(--color-info);
}

/* ===== 实用工具类 ===== */
.text-primary { color: var(--color-text-primary) !important; }
.text-secondary { color: var(--color-text-secondary) !important; }
.text-disabled { color: var(--color-text-disabled) !important; }
.text-accent { color: var(--color-accent) !important; }

.bg-surface { background-color: var(--color-surface) !important; }
.bg-accent { background-color: var(--color-accent) !important; }

.border-default { border-color: var(--color-border) !important; }
.border-accent { border-color: var(--color-accent) !important; }

/* ===== 调试样式 ===== */
.debug-theme-vars::before {
  content: "BG: " var(--color-background) " | Text: " var(--color-text-primary);
  position: fixed;
  top: 10px;
  right: 10px;
  background: rgba(0,0,0,0.8);
  color: white;
  padding: 4px 8px;
  font-size: 12px;
  z-index: 9999;
  border-radius: 4px;
}

/* ===== 高级交互效果 ===== */

/* 表格行悬浮效果 */
.table-row {
  transition: background-color 0.15s ease;
}

.table-row:hover {
  background-color: var(--color-surface-secondary);
}

.dark .table-row:hover {
  background-color: rgba(255, 255, 255, 0.05);
}

/* 卡片悬浮效果 */
.card-interactive {
  transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
  cursor: pointer;
}

.card-interactive:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}

.dark .card-interactive:hover {
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

/* 加载状态 - 骨架屏 */
.skeleton {
  background: linear-gradient(90deg,
    var(--color-border-default) 25%,
    rgba(255, 255, 255, 0.5) 50%,
    var(--color-border-default) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
  border-radius: var(--radius-sm);
}

@keyframes skeleton-loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* 加载按钮状态 */
.button-loading {
  position: relative;
  color: transparent !important;
  pointer-events: none;
}

.button-loading::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 16px;
  height: 16px;
  margin: -8px 0 0 -8px;
  border: 2px solid transparent;
  border-top: 2px solid currentColor;
  border-radius: 50%;
  animation: button-spin 0.8s linear infinite;
  color: white;
}

@keyframes button-spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* 脉冲动画 */
.pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* 淡入动画 */
.fade-in {
  animation: fade-in 0.3s ease-out;
}

@keyframes fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* 滑入动画 */
.slide-in-right {
  animation: slide-in-right 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

@keyframes slide-in-right {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
